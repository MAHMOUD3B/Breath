<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HPI | اتشيك اوت</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&family=Cairo:wght@200;300;400;500;600&family=Comfortaa:wght@300;400;500&family=Poppins:wght@200;300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="./css/all.min.css" />
  <link rel="stylesheet" href="./css/bootstrap.rtl.min.css" />
  <link rel="stylesheet" href="./css/bootstrap.min.css.map" />
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/offers.css" />
  <link rel="stylesheet" href="./css/responsive.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="icon" type="image/png" href="./img/HPI logotest.png" />

  <!-- Meta Pixel Code -->
  <script>
    !function (f, b, e, v, n, t, s) {
      if (f.fbq) return; n = f.fbq = function () {
        n.callMethod ?
          n.callMethod.apply(n, arguments) : n.queue.push(arguments)
      };
      if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
      n.queue = []; t = b.createElement(e); t.async = !0;
      t.src = v; s = b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t, s)
    }(window, document, 'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1166419688986879');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1166419688986879&ev=PageView&noscript=1" /></noscript>
  <!-- End Meta Pixel Code -->

  <!-- TikTok Pixel Code Start -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject = t; var ttq = w[t] = w[t] || []; ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie", "holdConsent", "revokeConsent", "grantConsent"], ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }; for (var i = 0; i < ttq.methods.length; i++)ttq.setAndDefer(ttq, ttq.methods[i]); ttq.instance = function (t) {
        for (
          var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)ttq.setAndDefer(e, ttq.methods[n]); return e
      }, ttq.load = function (e, n) {
        var r = "https://analytics.tiktok.com/i18n/pixel/events.js", o = n && n.partner; ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = r, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {}; n = document.createElement("script")
          ; n.type = "text/javascript", n.async = !0, n.src = r + "?sdkid=" + e + "&lib=" + t; e = document.getElementsByTagName("script")[0]; e.parentNode.insertBefore(n, e)
      };


      ttq.load('D41N013C77U7N6DP72RG');
      ttq.page();
    }(window, document, 'ttq');
  </script>
  <!-- TikTok Pixel Code End -->
</head>

<body>
  <!-- Top Bar Start -->
  <header class="top-bar">
    <div class="container d-none d-md-block">
      <div class="row">
        <div class="col-6 top-bar-social">
          <ul class="list-unstyled">
            <li>
              <a target="_blank" href="https://www.facebook.com/profile.php?id=61580457038298"><i
                  class="fa-brands fa-facebook-f"></i></a>
            </li>
            <li>
              <a href="https://wa.me/201126330025" target="_blank">
                <i class="fa-brands fa-whatsapp"></i>
              </a>
            </li>
            <li>
              <a target="_blank" href="https://www.instagram.com/breathhpi/ "><i class="fa-brands fa-instagram"></i></a>
            </li>
            <li>
              <a target="_blank" href="https://www.tiktok.com/@breathhpi"><i class="fa-brands fa-tiktok"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </header>
  <!-- Top Bar End -->

  <!--Navbar start-->
  <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
    <div class="container">
      <a class="navbar-brand" href="/index.html"><img src="./img/Logo.png" alt="" /></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav m-auto mb-2 mb-lg-0 justify-content-center">
          <li class="nav-item">
            <a class="nav-link " href="/index.html">الرئيسية</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html#AboutUs">عن المنتج</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="offers.html">العروض </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="how-to-use.html">طريقة الاستعمال</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="usage-inductions.html">
              دواعي الاستخدام
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="index.html#contactUs"> تواصل معنا</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="checkout-en.html"> English</a>
          </li>

          </li>
        </ul>
        <div class="d-flex align-items-center">
          <a href="cheakout.html" class="btn btn-lg order-now-btn d-none d-md-block" role="button"
            aria-pressed="true">اطلب الآن</a>
        </div>
      </div>
    </div>
  </nav>
  <!--Navbar End-->

  <!-- Offers buttons Start -->
  <section class="offers-btns my-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <!-- عروض الأفراد -->
          <a href="/offers.html#individual" class="offers-btn w-100">عروض الافراد</a>
        </div>
        <div class="col-md-6">
          <!-- عروض الكميات -->
          <a href="/offers.html#quantity" class="offers-btn w-100">عروض الكميات</a>
        </div>
      </div>
    </div>
  </section>
  <!-- Offers buttons End -->

  <!--contact us start-->
  <section class="contact-us">
    <div class="container">
      <div class="section-title">
        <h3>تواصل معنا لطلب أوردر</h3>
        <p>برجاء ادخال بياناتك بشكل صحيح ليصلك الأوردر في اسرع وقت</p>
      </div>
      <div class="contact-us-content" id="buy">
        
        <div class="row">
          <div class="col-lg-8">
            <div class="contact-form">
              <p class="offer-message text-center"></p>
              <div class="row py-2">
                <div class="col-md-6 form-group">
                  <label for="Quantity"> عدد القطع</label>
                  <input type="number" class="form-control fs-4" id="qty" min="1" placeholder="ادخل عدد القطع" required />
                </div>
                <div class="col-md-6 form-group">
                  <label for="total"> الاجمالي بعد الخصم</label>
                  <input type="text" class="form-control text-dark fs-4" readonly disabled id="total" />
                </div>
              </div>
              <hr>
              <h4 class="sttitle">اطلب الآن</h4>
              <div class="row">
                <div class="col-md-6 form-group">
                  <label for="firstname">اسم العميل</label>
                  <input type="text" class="form-control" id="firstname" placeholder="اسم العميل" />
                  <div class="invalid-feedback">ادخل الاسم.</div>
                </div>
                <div class="col-md-6 form-group">
                  <label for="phone"> رقم الموبايل</label>
                  <input type="text" class="form-control" id="phone" placeholder=" برجاء ادخال رقم موبايل" />
                  <div class="invalid-feedback">
                    برجاء ادخال رقم هاتف صحيح
                  </div>
                </div>
                <div class="col-md-6 form-group">
                  <label for="phone">برجاء ادخال رقم موبايل بديل (اختياري)</label>
                  <input type="text" class="form-control" id="phone1" placeholder="برجاء ادخال رقم موبايل بديل   " />
                  <div class="invalid-feedback">
                    برجاء ادخال رقم هاتف صحيح
                  </div>
                </div>
                <div class="col-md-6 form-group">
                  <label for="phone"> المحافظة</label>
                  <select type="text" class="form-control" id="inputGroupSelect01">
                    <option selected>اختر المحافظة ..</option>
                    <option value="1">القاهره</option>
                    <option value="2"> القليوبية</option>
                    <option value="3"> الجيزة</option>
                    <option value="3">الإسكندرية</option>
                    <option value="3">الشرقية</option>
                    <option value="3">الدقهلية</option>
                    <option value="3">الغربية</option>
                    <option value="3">البحيرة</option>
                    <option value="3">دمياط</option>
                    <option value="3">بورسعيد</option>
                    <option value="3"> السويس</option>
                    <option value="3">الإسماعيلية</option>
                    <option value="3">مطروح</option>
                    <option value="3">الفيوم</option>
                    <option value="3">بني سويف</option>
                    <option value="3">المنيا</option>
                    <option value="3">أسيوط</option>
                    <option value="3">سوهاج</option>
                    <option value="3">قنا</option>
                    <option value="3">الأقصر</option>
                    <option value="3"> أسوان</option>
                    <option value="3">البحر الأحمر</option>
                    <option value="3"> الوادي الجديد</option>
                    <option value="3">شمال سيناء</option>
                    <option value="3">جنوب سيناء</option>
                    <option value="3">المنوفية</option>
                    <option value="3">بني سويف</option>
                  </select>
                </div>
                <div class="col-md-6 form-group">
                  <label for="firstname">المنطقة السكنية</label>
                  <input type="text" class="form-control" id="area" placeholder=" المنطقة السكنية" />
                  <div class="invalid-feedback">ادخل المنطقة السكنية.</div>
                </div>
                <div class="col-md-6 form-group">
                  <label for="firstname">العنوان بالتفصيل</label>
                  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                    placeholder="ادخل العنوان بالتفصيل"></textarea>
                  <div class="invalid-feedback">ادخل المنطقة السكنية.</div>
                </div>
                <h4 class="payment-title">الدفع</h4>

                <div class="col-md-6 payment-ways">
                  <div class="form-check">
                    <input type="radio" class="form-check-input" id="method1" name="redirect" checked="true"
                      value="no-link" onclick="show1();" />
                    <label for="method1" class="form-check-label1"><img src="./img/house.png" alt="" /> الدفع عن
                      الاستلام</label>
                  </div>
                </div>
                <div class="col-md-6 payment-ways">
                  <div class="form-check">
                    <input type="radio" class="form-check-input" id="method2" name="redirect" onclick="show1(); "
                      value="no-link" />
                    <label for="method2" class="form-check-label"><img src="./img/voda.png" alt="" /> فودافون
                      كاش</label>
                  </div>
                </div>
                <div class="col-md-6 payment-ways">
                  <div class="form-check">
                    <input type="radio" class="form-check-input" id="method3" name="redirect" onclick="show1(); "
                      value="no-link" />
                    <label for="method3" class="form-check-label"><img src="./img/insta.png" alt="" /> آنستا باي</label>
                  </div>
                </div>
                <div class="col-md-6 payment-ways">
                  <div class="form-check">
                    <input type="radio" class="form-check-input" id="method4" name="redirect" onclick="show2();"
                      value="no-link" required />
                    <label for="method4" class="form-check-label2"><img src="./img/visa.png" alt="" /> فيزا كارد</label>
                  </div>
                </div>
                
                <button class="btn btn-checkout" role="button">اضغط لإتمام الشراء</button>
              </div>
            </div>
          </div>
          <div class="col-lg-4" id="contactUs">
            <div class="contact-info">
              <div class="cont-info-title">
                <h4>تواصل معنا</h4>
                <p>كن على تواصل معنا و تابعنا يصلك كل جديد</p>
              </div>

              <div class="contact-field"></div>
              <div class="contact-field">
                <div class="cont-icon">
                  <img src="./img/email.png" alt="" />
                </div>
                <div class="cont-txt">
                  <h5>البريد الإلكتروني</h5>
                  <p>Inf@hpi-eg.com</p>
                </div>
              </div>
              <div class="contact-field">
                <div class="cont-icon">
                  <img src="./img/phone.png" alt="" />
                </div>
                <div class="cont-txt">
                  <h5>تواصل معانا عبر : </h5>
                  <p>01126330025</p>
                </div>
              </div>
              <hr />
              <!-- <div class="top-bar-social contc-social">
                  <ul class="list-unstyled">
                    <li>
                      <a target="_blank" href="https://www.facebook.com/profile.php?id=61580457038298"><i class="fa-brands fa-facebook-f" ></i></a>
                    </li>
                    <li>
                     <a href="https://wa.me/201126330025" target="_blank">
  <i class="fa-brands fa-whatsapp"></i>
</a>
                    </li>
                    <li>
                      <a target="_blank" href="https://www.instagram.com/breathhpi/ "><i class="fa-brands fa-instagram"></i></a>
                    </li>
                    <li>
                      <a target="_blank" href="https://www.tiktok.com/@breathhpi"><i class="fa-brands fa-tiktok"></i></a>
                    </li>
                  </ul>
                </div> -->
              <!-- <div class="adrees">
                  <div class="image">
                     <img src="/img/hpi logo.png " alt="" width="100PX">
                  </div>
                  <P>Hendy Pharmaceutical Industries </P>
                </div> -->
              <div class="adrees">
                <div class="adrees-top">


                  <!-- ايكون السوشيال ميديا  -->
                  <div class="social">
                    <a href="https://wa.me/201126330025" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
                    <a href="https://www.tiktok.com/@breathhpi" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="https://www.instagram.com/breathhpi/ " target="_blank"><i
                        class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=61580457038298" target="_blank"><i
                        class="fa-brands fa-facebook-f"></i></a>

                  </div>

                </div>

                <div class="image">
                  <img src="/img/hpi logo.png" alt="HPI logo" width="100">
                </div>
                <div class="hpi">
                  <a class="nav-link" href="offers en.html"> English</a>
                </div>

              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Contact Us Ends-->


  <!-- Confirm Order Modal -->
  <div id="confirmModal" class="confirm-modal" aria-hidden="true">
    <div class="confirm-backdrop"></div>

    <div class="confirm-dialog" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
      <button class="confirm-close" type="button" aria-label="إغلاق">&times;</button>

      <h5 id="confirmTitle" class="confirm-title">تأكيد البيانات قبل الإتمام</h5>

      <div class="confirm-body">
        <ul class="confirm-list" id="confirmList">
          <!-- يتم ملؤه بالـ JS -->
        </ul>
        <p class="confirm-note">راجع البيانات بعناية. يمكنك تعديلها قبل التأكيد.</p>
      </div>

      <div class="confirm-actions">
        <button type="button" class="btn btn-edit" id="btnEdit">تعديل البيانات</button>
        <button type="button" class="btn btn-confirm" id="btnConfirm">تأكيد الطلب</button>
      </div>
    </div>
  </div>

  <!--footer start-->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-3">
          <div class="footer-field">
            <div class="footer-icon">
              <img src="./img/footer1.png" alt="photo image" />
            </div>
            <div class="footer-txt">
              <button type="button" class="btn footerlink" data-bs-toggle="modal" data-bs-target="#privacyModal">
                سياسة الخصوصية
              </button>
              <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="privacyModalLabel">
                        سياسة الخصوصية
                      </h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <h4>سياسة الخصوصية</h4>
                      <p>
                        نحترم خصوصيتك. نجمع بيانات أساسية لإتمام الطلب والشحن والدعم (الاسم، العنوان، الهاتف، البريد).
                        لا نخزّن بيانات البطاقة؛ تتم عبر مزوّد دفع آمن. نستخدم كوكيز للتحسين فقط، ونشارك البيانات مع
                        شركاء الشحن والدفع عند الحاجة. لطلب الوصول أو الحذف: [email].
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-3">
          <div class="footer-field">
            <div class="footer-icon">
              <img src="./img/footer2.png" alt="شروط الاستخدام" />
            </div>
            <div class="footer-txt">
              <button type="button" class="btn footerlink" data-bs-toggle="modal" data-bs-target="#termsModal">
                شروط الاستخدام
              </button>

              <!-- ملاحظات: id و aria-labelledby متطابقان مع الزر -->
              <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="termsModalLabel">شروط الاستخدام</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
                    </div>
                    <div class="modal-body">
                      <h4>شروط الاستخدام</h4>
                      <p>
                        يُستخدم منتج بريث لتخفيف أعراض الجيوب الأنفية وتحسين التنفس.
                        يجب الالتزام بطريقة الاستعمال الموصى بها وعدم استخدامه كبديل للعلاج الطبي.
                        الشركة غير مسؤولة عن أي أضرار ناتجة عن سوء الاستخدام أو تجاهل التعليمات.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>


        <div class="col-lg-3">
          <div class="footer-field">
            <div class="footer-icon">
              <img src="./img/footer3.png" alt="" />
            </div>
            <div class="footer-txt">
              <button type="button" class="btn footerlink" data-bs-toggle="modal" data-bs-target="#privacyModal2">
                الاستبدال و الاسترجاع
              </button>
              <div class="modal fade" id="privacyModal2" tabindex="-1" aria-labelledby="privacyModalLabel2"
                aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="privacyModalLabel2">
                        سياسة الاستبدال
                      </h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <h4>سياسة الاستبدال </h4>
                      <p> نقبل الاسترجاع/الاستبدال خلال 14 يومًا للمنتجات غير المفتوحة والمختومة فقط حفاظًا على الصحة.
                        في حال وصول منتج تالف أو خاطئ، نستبدله أو نرد المبلغ دون رسوم شحن إضافية عند الإبلاغ خلال 48
                        ساعة.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-field">
            <div class="footer-icon">
              <img src="./img/feat3.png" alt="" />
            </div>
            <div class="footer-txt">
              <button type="button" class="btn footerlink" data-bs-toggle="modal" data-bs-target="#privacyModal3">
                سياسة الشحن
              </button>
              <div class="modal fade" id="privacyModal3" tabindex="-1" aria-labelledby="privacyModalLabel3"
                aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="privacyModalLabel3">
                        سياسة الشحن
                      </h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <h4>سياسة الشحن</h4>
                      <p>
                        نُجهّز الطلب خلال 1–2 يوم عمل ونُرسل داخل جمهورية مصر العربية فقط. عادةً يصل الشحن خلال 1–3 أيام
                        داخل القاهرة والجيزة و2–5 أيام لباقي المحافظات. تُحسب تكلفة الشحن وتظهر عند الدفع، ويتوفر تتبّع
                        للطلب. في حال فشل التسليم بسبب عنوان غير دقيق أو عدم تواجد المستلم قد تُعاد الشحنة وتُطبق رسوم
                        إعادة الشحن. لطلب تعديل العنوان يُرجى التواصل قبل الشحن.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!--footer Ends-->

  <!-- Scripts files -->
  <script src="./js/all.min.js"></script>
  <script src="https://use.fontawesome.com/1744f3f671.js"></script>
  <script src="./js/bootstrap.bundle.min.js"></script>
  <script src="./js/bootstrap.bundle.min.js.map"></script>
  <script src="/js/main.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const $ = (s, root = document) => root.querySelector(s);
      // عناصر الفورم
      const firstname = document.getElementById("firstname");
      const phone = document.getElementById("phone");
      const phoneAlt = document.getElementById("phone1");
      const governorate = document.getElementById("inputGroupSelect01");
      const area = document.getElementById("area");
      const address = document.getElementById("exampleFormControlTextarea1");
      const qty = document.getElementById("qty");
      const total = document.getElementById("total");
      const btnCheckout = document.querySelector(".btn.btn-checkout");
      const selectedPaymentMethod = $("input[name='redirect']:checked")?.id;
      // طرق الدفع (نفس IDs عندك)
      const methodRadios = Array.from(document.querySelectorAll('input[name="redirect"]'));
      const paymentLabelById = {
        "method1": "الدفع عند الاستلام",
        "method2": "فودافون كاش",
        "method3": "إنستا باي",
        "method4": "فيزا / ماستر كارد"
      };

      // عناصر البوب-أب
      const modal = document.getElementById("confirmModal");
      const list = document.getElementById("confirmList");
      const btnConfirm = document.getElementById("btnConfirm");
      const btnEdit = document.getElementById("btnEdit");
      const btnClose = modal.querySelector(".confirm-close");

      // فتح / قفل المودال
      const openModal = () => modal.classList.add("show");
      const closeModal = () => modal.classList.remove("show");

      btnClose.addEventListener("click", closeModal);
      btnEdit.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => {
        if (e.target === modal || e.target.classList.contains("confirm-backdrop")) closeModal();
      });

      // التحقق الأساسي قبل العرض (بسيط وخفيف)
      function validateRequired() {
        let ok = true;
        const requiredFields = [
          [firstname, "ادخل الاسم."],
          [phone, "برجاء ادخال رقم هاتف صحيح"],
          [governorate, "اختر المحافظة."],
          [area, "ادخل المنطقة السكنية."],
          [address, "ادخل العنوان بالتفصيل."],
          [qty, "ادخل عدد القطع."]
        ];

        requiredFields.forEach(([el]) => el.classList.remove("is-invalid"));

        requiredFields.forEach(([el]) => {
          const val = (el.value || "").trim();
          const invalid = !val || (el === governorate && (el.selectedIndex === 0));
          if (invalid) {
            el.classList.add("is-invalid");
            ok = false;
          }
        });
        if (!ok) {
          // اسكرول لأول عنصر غير صالح
          const firstInvalid = document.querySelector(".is-invalid");
          if (firstInvalid) firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        return ok;
      }

      // تكوين عناصر العرض في البوب-أب
      function buildRows(data) {
        list.innerHTML = "";
        const entries = [
          ["اسم العميل", data.name],
          ["رقم الموبايل", data.phone],
          ["موبايل بديل", data.phoneAlt || "—"],
          ["المحافظة", data.gov],
          ["المنطقة السكنية", data.area],
          ["العنوان", data.address],
          ["طريقة الدفع", data.payment],
          ["عدد القطع", data.qty],
          ["الإجمالي بعد الخصم", data.total]
        ];
        for (const [k, v] of entries) {
          const li = document.createElement("li");
          const key = document.createElement("div"); key.className = "k"; key.textContent = k;
          const val = document.createElement("div"); val.className = "v"; val.textContent = String(v || "").trim();
          li.appendChild(key); li.appendChild(val);
          list.appendChild(li);
        }
      }

      async function handleCodPayment(orderData) {
        try {
            const response = await fetch('https://api.breath.hpi-eg.com/api/payments/cod', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
              },
              body: JSON.stringify(orderData)
            });

            console.log('Response status:', response.status);
            const result = await response.json();
            console.log('API Response:', result);

            if (response.ok && result.success) {
              window.location.href = '/thankyou.html';
            } else {
              alert('حدث خطأ أثناء إرسال الطلب: ' + (result.error || 'خطأ غير معروف'));
            }
          } catch (error) {
            console.error('Error sending order:', error);
            alert('حدث خطأ أثناء إرسال الطلب: ' + error.message);
          }
      }
      
      /*
      async function handleWalletPayment(orderData) {
        try {
      console.log('Attempting wallet payment:', orderData);
      
      const response = await fetch(`${API_BASE_URL}/api/payments/wallet`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Accept: "application/json",          
        },       
        body: JSON.stringify(orderData),
      });

      const result = await response.json();

      if (!response.ok || !result.success) {
        throw new Error(result.error || "فشل إنشاء عملية الدفع.");
      }

      // Handle different wallet payment responses
      console.log('Payment response:', result);

      if (result.payment_method === "iframe") {
        // Show iframe URL but don't redirect for testing
        console.log('Iframe URL:', result.data.iframe_url);
        alert('سيتم التحويل إلى صفحة الدفع. URL: ' + result.data.iframe_url);
        // window.location.href = result.data.iframe_url;
      } else if (result.payment_method === "mobile_wallet") {
        // Mobile wallet - user will receive notification on phone
        console.log('Mobile wallet payment initiated');
        alert(
          "تم إرسال طلب الدفع إلى هاتفك. برجاء إدخال الرقم السري لتأكيد المعاملة."
        );
      }
    } catch (error) {
      alert(`حدث خطأ: ${error.message}`);
      console.error("Wallet Payment error:", error);
      throw error;
    }
      }
      */
     
      // عند الضغط على "اضغط لإتمام الشراء"
      btnCheckout.addEventListener("click", (e) => {
        // امنع الانتقال مؤقتًا لعرض البوب-أب
        e.preventDefault();

        // تحقق بسيط
        if (!validateRequired()) return;

        // تحديد طريقة الدفع
        const selected = methodRadios.find(r => r.checked);
        const paymentText = selected ? (paymentLabelById[selected.id] || "—") : "—";

        // تجهيز البيانات
        const data = {
          name: firstname.value.trim(),
          phone: phone.value.trim(),
          phoneAlt: phoneAlt.value.trim(),
          gov: (governorate.options[governorate.selectedIndex] || {}).text || "",
          area: area.value.trim(),
          address: address.value.trim(),
          payment: paymentText,
          qty: qty.value || "1",
          total: (total && total.value) ? total.value : "—"
        };

        // املأ القائمة وافتح البوب-أب
        buildRows(data);
        openModal();

        // لو المستخدم أكد — قم بإرسال الطلب
        const onConfirm = async () => {
          closeModal(); // إغلاق مودال التأكيد

          // تجهيز بيانات العميل
          const customerData = {
            first_name: data.name.split(' ')[0],
            last_name: data.name.split(' ').slice(1).join(' ') || 'NA',
            phone_number: data.phone,
            full_address: {
              apartment: "NA",
              floor: "NA",
              street: data.address,
              building: "NA",
              postal_code: "NA",
              city: data.area,
              country: "EG",
              state: data.gov
            }
          };

          // تجهيز بيانات الطلب
          const orderData = {
            amount: Number(data.total),
            amount_cents: Number(data.total) * 100,
            quantity: Number(data.qty),
            currency: "EGP",
            wallet_type: "CASH",
            wallet_display_name: "CASH",
            payment_method: "cash_on_delivery",
            customer: customerData
          };

          try {
            switch (selectedPaymentMethod) {
              case "method1": // Cash on Delivery
                await handleCodPayment(orderData);
                break;

              case "method4": // Visa Card
                orderData.wallet_type = "CARD";
                await alert("طرق الدفع غير متاحة حاليا, جرب الدفع عند الاستلام");
                break;

              case "method2": // Vodafone Cash
                orderData.wallet_type = "VODAFONE_CASH";
                orderData.phone_number = customerData.phone_number;
                await alert("طرق الدفع غير متاحة حاليا, جرب الدفع عند الاستلام");
                break;

              case "method3": // Instapay
                alert(
                  "الدفع عن طريق انستا باي غير متاح حاليًا. برجاء اختيار طريقة دفع أخرى."
                );
                throw new Error("Instapay not implemented.");

              default:
                alert("برجاء اختيار طريقة دفع صالحة.");
                throw new Error("Invalid payment method selected.");
            }
          } catch (error) {
            console.error("Payment processing failed:", error.message);
          }
        };

        // تجنّب تكرار الربط لو فتح/قفل كتير
        btnConfirm.replaceWith(btnConfirm.cloneNode(true));
        const freshConfirm = document.getElementById("btnConfirm");
        freshConfirm.addEventListener("click", onConfirm, { once: true });
      });
    });
  </script>
</body>

</html>